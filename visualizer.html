<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fordâ€‘Johnson Â· multiâ€‘flowchart Â· stylish Â· keyboard up/down</title>
    <!-- Mermaid for flowchart -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js"></script>
    <!-- External CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Input area: live update + random generator -->
    <div class="input-area">
        <label for="numberInput" style="color:#dfeaff;">ğŸ”¢ Numbers (comma/space separated):</label>
        <input type="text" id="numberInput" value="5 2 8 3 1 7 4 6" placeholder="e.g. 5 2 8 3 1 7 4 6">
        <button class="btn" id="resetBtn">âŸ² Reset</button>
        <div style="display: flex; align-items: center; gap: 8px; margin-left: 10px;">
            <span style="color:#dfeaff;">ğŸ² Random (1â€‘100)</span>
            <input type="number" id="randomCount" min="1" max="30" value="8" step="1">
            <button class="btn small" id="randomBtn">Generate</button>
        </div>
        <span style="color:#aaa; margin-left:5px;">(updates as you type)</span>
    </div>

    <div class="controls">
        <button class="btn" id="firstBtn">â® First</button>
        <button class="btn" id="prevBtn">â—€ Prev</button>
        <button class="btn" id="nextBtn">Next â–¶</button>
        <button class="btn" id="lastBtn">â­ Last</button>
        <div class="slider-container">
            <span>Step</span>
            <input type="range" id="stepSlider" min="0" max="0" value="0" step="1">
            <span id="stepLabel">0 / 0</span>
        </div>
        <div class="stats">
            âš–ï¸ Comparisons: <span id="cmpCount">0</span>
        </div>
        <!-- Flowchart button -->
        <button class="btn" id="flowchartBtn">ğŸ“Š Flowcharts</button>
        <!-- Jacobsthal button with pulsing effect -->
        <button class="btn" id="jacobsthalModalBtn">ğŸ“˜ Jacobsthal steps</button>
        <span class="key-hint">â† â†’ prev/next, â†‘ last, â†“ first</span>
    </div>

    <div class="main-panel">
        <!-- LEFT PANEL: two independent scrollable sections with 3:1 ratio -->
        <div class="left-panel">
            <div class="stack-section">
                <h3>ğŸ“š Call stack</h3>
                <div class="stack-scroll" id="callStackScroll">
                    <div id="callStackContainer"></div>
                </div>
            </div>
            <div class="memory-section">
                <h3>ğŸ§  Memory layout</h3>
                <div class="memory-scroll" id="memoryScroll">
                    <div id="memoryLayout"></div>
                </div>
            </div>
        </div>

        <!-- RIGHT PANEL: comments, locals, vector visual -->
        <div class="right-panel">
            <h3>ğŸ“ Step comment</h3>
            <div id="stepComment" class="comment-box"></div>
            <h3>ğŸ”¬ Current frame variables</h3>
            <div id="localVarsPanel" style="background: #1e1e2a; border-radius: 8px; padding: 15px; overflow-y: auto; flex: 1;"></div>
            <div style="margin-top: 20px;">
                <h3>ğŸ“Š vector content</h3>
                <div id="vectorVisual" style="background: #1e1e2a; border-radius: 8px; padding: 15px;"></div>
            </div>
        </div>
    </div>

    <!-- MODAL: Jacobsthal steps -->
    <div id="jacobsthalModal" class="modal-overlay">
        <div class="modal-content">
            <span id="modalCloseBtn" class="modal-close">&times;</span>
            <div class="modal-title">ğŸ” Jacobsthal insertion order â€“ new algorithm (1,3 start)</div>
            <div id="modalBody" style="font-size: 14px; line-height: 1.6;">
                <!-- dynamic content -->
            </div>
        </div>
    </div>

    <!-- MODAL: Multi-flowchart selector -->
    <div id="flowchartModal" class="modal-overlay">
        <div class="modal-content" style="width: 900px;">
            <span id="flowchartCloseBtn" class="modal-close">&times;</span>
            <div class="modal-title">ğŸ“Š Fordâ€‘Johnson â€“ select a flowchart</div>
            <div class="option-bar">
                <button class="btn option" data-flowchart="overall">ğŸ“Œ Overall algorithm</button>
                <button class="btn option" data-flowchart="pairs">ğŸ”¹ Pair creation</button>
                <button class="btn option" data-flowchart="winners">ğŸ† Winner extraction & reorder</button>
                <button class="btn option" data-flowchart="jacobsthal">ğŸ”¢ Jacobsthal order</button>
                <button class="btn option" data-flowchart="insert">ğŸ“¥ Pending insertion</button>
            </div>
            <div id="flowchartDisplay" class="mermaid-wrapper">
                <div class="mermaid" id="mermaidDiagram">
                    <!-- Dynamic diagram will be inserted here -->
                </div>
                <div id="flowchartDesc" class="flowchart-desc">
                    <!-- Description will appear here -->
                </div>
            </div>
        </div>
    </div>

    <footer>âš¡ Fordâ€‘Johnson Â· multiâ€‘flowchart Â· stylish Â· keyboard up/down</footer>

    <!-- External JavaScript -->
    <script src="js/script.js"></script>
</body>
</html>
